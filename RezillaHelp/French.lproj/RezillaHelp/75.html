<HTML>
<HEAD>
<TITLE>Liste de propriétés du pluginLe fichier Info.plist stocke des données et des informations utiles</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=iso-8859-1">
<META NAME=GENERATOR CONTENT="Aida Mode">
</HEAD>
<BODY>

<A HREF="index.html">Orig</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="74.html">Prec</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="76.html">Suiv</A><HR><P>&nbsp;</P>
<H3>Liste de propriétés du plugin</H3><P>Le fichier <I>Info.plist</I> stocke des données et des informations utiles
relatives au plugin. Il utilise un format XML: certaines clés sont
utilisées par le Finder et le Système, d'autres sont utilisés par Rezilla
lui-même.<P><H4>Les clés du Système</H4>
Les clés définies par le Système sont les balises usuelles que l'on trouve 
dans les applications construites sous forme de paquetage (<I>application bundle</I>).
Dans le cas du plugin <I>RezImage</I>, par exemple, on trouve les paires 
clé/valeur suivantes:
<P><TABLE BORDER=0 CELLPADDING=1>
<TR><TD><B>Clé</B></TD><TD><B>Valeur</B></TD></TR>
<TR><TD>CFBundleIdentifier</TD><TD><I>net.sourceforge.rezilla.RezImagePlugin</I></TD></TR>
<TR><TD>CFBundleName</TD><TD><I>RezImagePlugin</I></TD></TR>
<TR><TD>CFBundleShortVersionString</TD><TD><I>RezImagePlugin 0.1</I></TD></TR>
<TR><TD>CFBundlePackageType</TD><TD><I>BNDL</I></TD></TR>
<TR><TD>CFBundleSignature</TD><TD><I>Rzil</I></TD></TR>
<TR><TD>CFBundleExecutable</TD><TD><I>RezImagePlugin</I></TD></TR>
<TR><TD>CFBundleVersion</TD><TD><I>0.1</I></TD></TR>
<TR><TD>CFBundleIconFile</TD><TD><I>RezillaPlugin.icns</I></TD></TR>
<TR><TD>CFBundleDevelopmentRegion</TD><TD><I>English</I></TD></TR>
<TR><TD>CFBundleInfoDictionaryVersion</TD><TD><I>6.0</I></TD></TR>
<TR><TD>LSRequiresCarbon</TD><TD><I>yes</I></TD></TR>
</TABLE></P><P><H4>Les clés de CFPlugin </H4>
Certaines sont requises par l'interface de programmation <I>CFPlugin</I>:
<UL>
	<LI> <I>CFPlugInDynamicRegistration</I> détermine la méthode
d'enregistrement adoptée par le plugin (statique ou dynamique). Rezilla
utilise l'enregistrement statique, la valeur doit donc toujours être <I>no</I>:
<PRE>
	&lt;key&gt;CFPlugInDynamicRegistration&lt;/key&gt;
	&lt;string&gt;NO&lt;/string&gt;
</PRE><P>	<LI> <I>CFPluginNameString</I> est optionnel et contient le nom du plugin. 
Par exemple:
<PRE>
	&lt;key&gt;CFPluginNameString&lt;/key&gt;
	&lt;string&gt;RezImagePlugin&lt;/string&gt;
</PRE><P>	<LI> <I>CFPlugInUnloadFunction</I> définit la fonction à appeler 
lorsque le code d'un plugin doit être désinstallé.
Cette valeur peut être laissée vide:
<PRE>
	&lt;key&gt;CFPlugInUnloadFunction&lt;/key&gt;
	&lt;string&gt;&lt;/string&gt;
</PRE><P>	<LI> <I>CFPlugInTypes</I> est utilisé pour l'enregistrement statique. Sa
valeur est un dictionnaire dont les clés sont des UUIDs de type de plugin
(voir la section <A HREF="#pluguuids"> Les UUIDs de plugin</A>) et dont les
valeurs sont des tableaux d'UUIDs de fabriques. L'UUID de type du plugin
est défini par Rezilla: il est défini par la constante symbolique ((v
kRezillaPluginEditorTypeID</TT> dans le fichier d'en-tête <I>RezillaPluginInterface.h</I> et sa valeur sous forme de chaîne est:
<PRE>
	306A0EF3-206E-11DA-8320-000A95B1FF7C
</PRE>
Les fonctions qui instancient une interface particulière sont appelées des
<I>fabriques</I>. Les UUIDs de ces fabriques sont définis par le plugin:
un UUID de fabrique par interface. Dans le cas du plugin <I>RezImagePlugin</I>, le fichier <I>Info.plist</I> définit ainsi:
<PRE>
	&lt;key&gt;CFPlugInTypes&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;306A0EF3-206E-11DA-8320-000A95B1FF7C&lt;/key&gt;
		&lt;array&gt;
			&lt;string&gt;0905F836-A20C-11DA-BC6C-000A95B1FF7C&lt;/string&gt;
		&lt;/array&gt;
	&lt;/dict&gt;
</PRE>
Cela signifie que le type identifié par l'UUID
306A0EF3-206E-11DA-8320-000A95B1FF7C (c'est-à-dire la constante
<I>kRezillaPluginEditorTypeID</I> définie par Rezilla) ne possède actuellement
qu'une seule interface, identifiée par l'UUID
0905F836-A20C-11DA-BC6C-000A95B1FF7C, attribué par le plugin.<P>	<LI> <I>CFPlugInFactories</I> est utilisé pour l'enregistrement statique.
Sa valeur est un dictionnaire dont les clés sont des UIIDs de fabriques
exprimés sous forme de chaînes et dont les valeurs sont les noms des
fabriques. Cette clé est très importante: elle indique le nom de la
fonction à appeler pour instancier une interface particulière. Le
dictionnaire établit une correspondance entre interfaces et noms de
fonctions. Le plugin, en tant que bibliothèque dynamique (<I>dynamic
library</I>), doit donner la définition de ces fonctions. Dans le cas du
plugin <I>RezImagePlugin</I>, le fichier <I>Info.plist</I> définit ainsi:
<PRE>
	&lt;key&gt;CFPlugInFactories&lt;/key&gt;
	&lt;dict&gt;
		&lt;key&gt;0905F836-A20C-11DA-BC6C-000A95B1FF7C&lt;/key&gt;
		&lt;string&gt;RezillaImageFactory&lt;/string&gt;
	&lt;/dict&gt;
</PRE>
On reconnaît ici l'UUID (0905F836-A20C-11DA-BC6C-000A95B1FF7C) vu au 
paragraphe précédent et attribué par le plugin pour désigner la fabrique 
qui implémente le service d'édition. La valeur correspondante est
<I>RezillaImageFactory</I>: c'est le nom de la fonction que Rezilla devra 
invoquer au moment de charger le plugin. Cette fonction doit être définie 
dans la bibliothèque dynamique.<P></UL><P><H4>Les clés de Rezilla</H4>
Rezilla s'attend à trouver deux clés supplémentaires dans le fichier
<I>Info.plist</I>:
<UL>
	<LI> la clé <I>RezillaPluginEditTypes</I> est obligatoire. C'est là que le
plugin déclare les types de ressources qu'il est capable d'éditer. La
valeur est un tableau de codes à quatre caractères (les types de
ressources). Par exemple, le plugin <I>RezImagePlugin</I> reconnaît 12
types de ressources qui sont déclarés comme ceci:<P><PRE>
	&lt;key&gt;RezillaPluginEditTypes&lt;/key&gt;
	&lt;array&gt;
		&lt;string&gt;JPEG&lt;/string&gt;
		&lt;string&gt;jpeg&lt;/string&gt;
		&lt;string&gt;JPG &lt;/string&gt;
		&lt;string&gt;jpg &lt;/string&gt;
		&lt;string&gt;TIFF&lt;/string&gt;
		&lt;string&gt;tiff&lt;/string&gt;
		&lt;string&gt;GIF &lt;/string&gt;
		&lt;string&gt;gif &lt;/string&gt;
		&lt;string&gt;PNG &lt;/string&gt;
		&lt;string&gt;png &lt;/string&gt;
		&lt;string&gt;BMP &lt;/string&gt;
		&lt;string&gt;bmp &lt;/string&gt;
	&lt;/array&gt;
</PRE><P>	<LI> la clé <I>RezillaPluginRole</I> définit le rôle du plugin. Dans
 la version 1.1, deux valeurs sont possibles: <I>Editor</I> ou <I>Viewer</I>.
<PRE>
	&lt;key&gt;RezillaPluginRole&lt;/key&gt;
	&lt;string&gt;Editor&lt;/string&gt;
</PRE>
Cette clé est optionnelle et n'est actuellement pas utilisée par Rezilla.<P></UL><P>

</BODY>
</HTML>
